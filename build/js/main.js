function openSearch(t){var i,e=document.getElementsByClassName("searchElement");for(i=0;i<e.length;i++)e[i].style.display="none";document.getElementById(t).style.display="block"}$("#toggle").click(function(){$(this).toggleClass("active"),$("#overlay").toggleClass("open")}),$(".toggle-advert").click(function(){$(this).toggleClass("active-advert"),$("#overlay-advert").toggleClass("open-advert")}),$("select").each(function(){var t=$(this),i=$(this).children("option").length;t.addClass("select-hidden"),t.wrap('<div class="select"></div>'),t.after('<div class="select-styled"></div>');var e=t.next("div.select-styled");e.text(t.children("option").eq(0).text());for(var s=$("<ul />",{class:"select-options"}).insertAfter(e),r=0;r<i;r++)$("<li />",{text:t.children("option").eq(r).text(),rel:t.children("option").eq(r).val()}).appendTo(s);var o=s.children("li");e.click(function(t){t.stopPropagation(),$("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").hide()}),$(this).toggleClass("active").next("ul.select-options").toggle()}),o.click(function(i){i.stopPropagation(),e.text($(this).text()).removeClass("active"),t.val($(this).attr("rel")),s.hide()}),$(document).click(function(){e.removeClass("active"),s.hide()})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var i=function(i,e){function s(i,e){this.defaults={slideDuration:"5000",speed:"500",arrowRight:".arrow-right",arrowLeft:".arrow-left"},this.settings=t.extend({},this,this.defaults,e),this.initials={currSlide:0,$currSlide:null,totalSlides:!1,csstransitions:!1},t.extend(this,this.initials),this.$el=t(i),this.changeSlide=t.proxy(this.changeSlide,this),this.init(),this.instanceUid=r++}var r=0;return s}();i.prototype.init=function(){this.csstransitionsTest(),this.$el.addClass("cool-carousel"),this.build(),this.events(),this.activate(),this.initTimer()},i.prototype.csstransitionsTest=function(){var t=document.createElement("modernizr"),i=["transition","WebkitTransition","MozTransition","OTransition","msTransition"];for(var e in i){var s=i[e],r=void 0!==t.style[s]&&s;if(r){this.csstransitions=r;break}}},i.prototype.addCSSDuration=function(){var t=this;this.$el.find(".slide").each(function(){this.style[t.csstransitions+"Duration"]=t.settings.speed+"ms"})},i.prototype.removeCSSDuration=function(){var t=this;this.$el.find(".slide").each(function(){this.style[t.csstransitions+"Duration"]=""})},i.prototype.build=function(){var t=this.$el.append('<ul class="indicators" >').find(".indicators");this.totalSlides=this.$el.find(".slide").length;for(var i=0;i<this.totalSlides;i++)t.append("<li data-index="+i+">")},i.prototype.activate=function(){this.$currSlide=this.$el.find(".slide").eq(0),this.$el.find(".indicators li").eq(0).addClass("active")},i.prototype.events=function(){t("body").on("click",this.settings.arrowRight,{direction:"right"},this.changeSlide).on("click",this.settings.arrowLeft,{direction:"left"},this.changeSlide).on("click",".indicators li",this.changeSlide)},i.prototype.clearTimer=function(){this.timer&&clearInterval(this.timer)},i.prototype.initTimer=function(){this.timer=setInterval(this.changeSlide,this.settings.slideDuration)},i.prototype.startTimer=function(){this.initTimer(),this.throttle=!1},i.prototype.changeSlide=function(t){if(!this.throttle){this.throttle=!0,this.clearTimer();var i=this._direction(t);if(this._next(t,i)){var e=this.$el.find(".slide").eq(this.currSlide).addClass(i+" active");this.csstransitions?this._cssAnimation(e,i):this._jsAnimation(e,i)}}},i.prototype._direction=function(t){return void 0!==t?void 0===t.data?"right":t.data.direction:"right"},i.prototype._next=function(i,e){var s=void 0!==i?t(i.currentTarget).data("index"):void 0;switch(!0){case void 0!==s:if(this.currSlide==s)return this.startTimer(),!1;this.currSlide=s;break;case"right"==e&&this.currSlide<this.totalSlides-1:this.currSlide++;break;case"right"==e:this.currSlide=0;break;case"left"==e&&0===this.currSlide:this.currSlide=this.totalSlides-1;break;case"left"==e:this.currSlide--}return!0},i.prototype._cssAnimation=function(t,i){setTimeout(function(){this.$el.addClass("transition"),this.addCSSDuration(),this.$currSlide.addClass("shift-"+i)}.bind(this),100),setTimeout(function(){this.$el.removeClass("transition"),this.removeCSSDuration(),this.$currSlide.removeClass("active shift-left shift-right"),this.$currSlide=t.removeClass(i),this._updateIndicators(),this.startTimer()}.bind(this),100+this.settings.speed)},i.prototype._jsAnimation=function(t,i){var e=this;"right"==i&&e.$currSlide.addClass("js-reset-left");var s={};s[i]="0%";var r={};r[i]="100%",this.$currSlide.animate(r,this.settings.speed),t.animate(s,this.settings.speed,"swing",function(){e.$currSlide.removeClass("active js-reset-left").attr("style",""),e.$currSlide=t.removeClass(i).attr("style",""),e._updateIndicators(),e.startTimer()})},i.prototype._updateIndicators=function(){this.$el.find(".indicators li").removeClass("active").eq(this.currSlide).addClass("active")},t.fn.coolCarousel=function(t){return this.each(function(e,s){s.coolCarousel=new i(s,t)})}}),$(".carousel").coolCarousel({arrowRight:".arrow-right",arrowLeft:".arrow-left",speed:1e3,slideDuration:5e3}),$("#listings-carousel1").coolCarousel({arrowRight:".arrow-right",arrowLeft:".arrow-left",speed:1e3,slideDuration:5e3}),$("#listings-carousel2").coolCarousel({arrowRight:".arrow-right",arrowLeft:".arrow-left",speed:1e3,slideDuration:5e3}),$("#listings-carousel3").coolCarousel({arrowRight:".arrow-right",arrowLeft:".arrow-left",speed:1e3,slideDuration:5e3});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsib3BlblNlYXJjaCIsInNlYXJjaEVsZW1lbnQiLCJpIiwieCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsImdldEVsZW1lbnRCeUlkIiwiJCIsImNsaWNrIiwidGhpcyIsInRvZ2dsZUNsYXNzIiwiZWFjaCIsIiR0aGlzIiwibnVtYmVyT2ZPcHRpb25zIiwiY2hpbGRyZW4iLCJhZGRDbGFzcyIsIndyYXAiLCJhZnRlciIsIiRzdHlsZWRTZWxlY3QiLCJuZXh0IiwidGV4dCIsImVxIiwiJGxpc3QiLCJjbGFzcyIsImluc2VydEFmdGVyIiwicmVsIiwidmFsIiwiYXBwZW5kVG8iLCIkbGlzdEl0ZW1zIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsIm5vdCIsInJlbW92ZUNsYXNzIiwiaGlkZSIsInRvZ2dsZSIsImF0dHIiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJqUXVlcnkiLCJjb29sQ2Fyb3VzZWwiLCJlbGVtZW50Iiwic2V0dGluZ3MiLCJfY29vbENhcm91c2VsIiwiZGVmYXVsdHMiLCJzbGlkZUR1cmF0aW9uIiwic3BlZWQiLCJhcnJvd1JpZ2h0IiwiYXJyb3dMZWZ0IiwiZXh0ZW5kIiwiaW5pdGlhbHMiLCJjdXJyU2xpZGUiLCIkY3VyclNsaWRlIiwidG90YWxTbGlkZXMiLCJjc3N0cmFuc2l0aW9ucyIsIiRlbCIsImNoYW5nZVNsaWRlIiwicHJveHkiLCJpbml0IiwiaW5zdGFuY2VVaWQiLCJwcm90b3R5cGUiLCJjc3N0cmFuc2l0aW9uc1Rlc3QiLCJidWlsZCIsImV2ZW50cyIsImFjdGl2YXRlIiwiaW5pdFRpbWVyIiwiZWxlbSIsImNyZWF0ZUVsZW1lbnQiLCJwcm9wcyIsInByb3AiLCJyZXN1bHQiLCJ1bmRlZmluZWQiLCJhZGRDU1NEdXJhdGlvbiIsIl8iLCJmaW5kIiwicmVtb3ZlQ1NTRHVyYXRpb24iLCIkaW5kaWNhdG9ycyIsImFwcGVuZCIsIm9uIiwiZGlyZWN0aW9uIiwiY2xlYXJUaW1lciIsInRpbWVyIiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwic3RhcnRUaW1lciIsInRocm90dGxlIiwiX2RpcmVjdGlvbiIsIl9uZXh0IiwiJG5leHRTbGlkZSIsIl9jc3NBbmltYXRpb24iLCJfanNBbmltYXRpb24iLCJkYXRhIiwiaW5kZXgiLCJjdXJyZW50VGFyZ2V0Iiwic2V0VGltZW91dCIsImJpbmQiLCJfdXBkYXRlSW5kaWNhdG9ycyIsImFuaW1hdGlvbiIsImFuaW1hdGlvblByZXYiLCJhbmltYXRlIiwiZm4iLCJvcHRpb25zIiwiZWwiXSwibWFwcGluZ3MiOiJBQVdBLFFBQVNBLFlBQVdDLEdBQ2hCLEdBQUlDLEdBQ0FDLEVBQUlDLFNBQVNDLHVCQUF1QixnQkFDeEMsS0FBS0gsRUFBSSxFQUFHQSxFQUFJQyxFQUFFRyxPQUFRSixJQUN0QkMsRUFBRUQsR0FBR0ssTUFBTUMsUUFBVSxNQUV6QkosVUFBU0ssZUFBZVIsR0FBZU0sTUFBTUMsUUFBVSxRQWpCM0RFLEVBQUUsV0FBV0MsTUFBTSxXQUNoQkQsRUFBRUUsTUFBTUMsWUFBWSxVQUNwQkgsRUFBRSxZQUFZRyxZQUFZLFVBRzdCSCxFQUFFLGtCQUFrQkMsTUFBTSxXQUN2QkQsRUFBRUUsTUFBTUMsWUFBWSxpQkFDcEJILEVBQUUsbUJBQW1CRyxZQUFZLGlCQWdCcENILEVBQUUsVUFBVUksS0FBSyxXQUNiLEdBQUlDLEdBQVFMLEVBQUVFLE1BQU9JLEVBQWtCTixFQUFFRSxNQUFNSyxTQUFTLFVBQVVYLE1BRWxFUyxHQUFNRyxTQUFTLGlCQUNmSCxFQUFNSSxLQUFLLDhCQUNYSixFQUFNSyxNQUFNLG9DQUVaLElBQUlDLEdBQWdCTixFQUFNTyxLQUFLLG9CQUMvQkQsR0FBY0UsS0FBS1IsRUFBTUUsU0FBUyxVQUFVTyxHQUFHLEdBQUdELE9BTWxELEtBQUssR0FKREUsR0FBUWYsRUFBRSxVQUNWZ0IsTUFBUyxtQkFD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Z2dsZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgJCgnI292ZXJsYXknKS50b2dnbGVDbGFzcygnb3BlbicpO1xyXG4gIH0pO1xyXG5cclxuJCgnLnRvZ2dsZS1hZHZlcnQnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlLWFkdmVydCcpO1xyXG4gICAkKCcjb3ZlcmxheS1hZHZlcnQnKS50b2dnbGVDbGFzcygnb3Blbi1hZHZlcnQnKTtcclxuICB9KTtcclxuXHJcbi8qKiBzZWFyY2ggKiovXHJcbmZ1bmN0aW9uIG9wZW5TZWFyY2goc2VhcmNoRWxlbWVudCkge1xyXG4gICAgdmFyIGk7XHJcbiAgICB2YXIgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzZWFyY2hFbGVtZW50XCIpO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB4W2ldLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjsgXHJcbiAgICB9XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWFyY2hFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiOyBcclxufVxyXG4vKlxyXG5zZWxlY3RcclxuKi9cclxuXHJcbiQoJ3NlbGVjdCcpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgIHZhciAkdGhpcyA9ICQodGhpcyksIG51bWJlck9mT3B0aW9ucyA9ICQodGhpcykuY2hpbGRyZW4oJ29wdGlvbicpLmxlbmd0aDtcclxuICBcclxuICAgICR0aGlzLmFkZENsYXNzKCdzZWxlY3QtaGlkZGVuJyk7IFxyXG4gICAgJHRoaXMud3JhcCgnPGRpdiBjbGFzcz1cInNlbGVjdFwiPjwvZGl2PicpO1xyXG4gICAgJHRoaXMuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJzZWxlY3Qtc3R5bGVkXCI+PC9kaXY+Jyk7XHJcblxyXG4gICAgdmFyICRzdHlsZWRTZWxlY3QgPSAkdGhpcy5uZXh0KCdkaXYuc2VsZWN0LXN0eWxlZCcpO1xyXG4gICAgJHN0eWxlZFNlbGVjdC50ZXh0KCR0aGlzLmNoaWxkcmVuKCdvcHRpb24nKS5lcSgwKS50ZXh0KCkpO1xyXG4gIFxyXG4gICAgdmFyICRsaXN0ID0gJCgnPHVsIC8+Jywge1xyXG4gICAgICAgICdjbGFzcyc6ICdzZWxlY3Qtb3B0aW9ucydcclxuICAgIH0pLmluc2VydEFmdGVyKCRzdHlsZWRTZWxlY3QpO1xyXG4gIFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXJPZk9wdGlvbnM7IGkrKykge1xyXG4gICAgICAgICQoJzxsaSAvPicsIHtcclxuICAgICAgICAgICAgdGV4dDogJHRoaXMuY2hpbGRyZW4oJ29wdGlvbicpLmVxKGkpLnRleHQoKSxcclxuICAgICAgICAgICAgcmVsOiAkdGhpcy5jaGlsZHJlbignb3B0aW9uJykuZXEoaSkudmFsKClcclxuICAgICAgICB9KS5hcHBlbmRUbygkbGlzdCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICB2YXIgJGxpc3RJdGVtcyA9ICRsaXN0LmNoaWxkcmVuKCdsaScpO1xyXG4gIFxyXG4gICAgJHN0eWxlZFNlbGVjdC5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAkKCdkaXYuc2VsZWN0LXN0eWxlZC5hY3RpdmUnKS5ub3QodGhpcykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5uZXh0KCd1bC5zZWxlY3Qtb3B0aW9ucycpLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKS5uZXh0KCd1bC5zZWxlY3Qtb3B0aW9ucycpLnRvZ2dsZSgpO1xyXG4gICAgfSk7XHJcbiAgXHJcbiAgICAkbGlzdEl0ZW1zLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICRzdHlsZWRTZWxlY3QudGV4dCgkKHRoaXMpLnRleHQoKSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICR0aGlzLnZhbCgkKHRoaXMpLmF0dHIoJ3JlbCcpKTtcclxuICAgICAgICAkbGlzdC5oaWRlKCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygkdGhpcy52YWwoKSk7XHJcbiAgICB9KTtcclxuICBcclxuICAgICQoZG9jdW1lbnQpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRzdHlsZWRTZWxlY3QucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICRsaXN0LmhpZGUoKTtcclxuICAgIH0pO1xyXG5cclxufSk7XHJcblxyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG47KGZ1bmN0aW9uKGZhY3Rvcnkpe1xyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmFjdG9yeShqUXVlcnkpO1xyXG4gICAgfVxyXG59KShmdW5jdGlvbigkKXtcclxuICAgIHZhciBjb29sQ2Fyb3VzZWwgPSAoZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3Mpe1xyXG4gICAgICAgIHZhciBpbnN0YW5jZVVpZCA9IDA7XHJcbiAgICAgICAgZnVuY3Rpb24gX2Nvb2xDYXJvdXNlbChlbGVtZW50LCBzZXR0aW5ncyl7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgICAgICAvLydpbmZpbml0ZScgOiAndHJ1ZScsXHJcbiAgICAgICAgICAgICAgICAvLydpbmRleCcgOiAnMCcsXHJcbiAgICAgICAgICAgICAgICAvLydzbGlkZXNWaXNpYmxlJyA6ICcxJyxcclxuICAgICAgICAgICAgICAgIC8vJ3NsaWRlc1RvU2Nyb2xsJyA6ICcxJyxcclxuICAgICAgICAgICAgICAgIC8vJ2Fycm93cycgOiAndHJ1ZScsXHJcbiAgICAgICAgICAgICAgICAvLydzd2lwZUFibGUnIDogJ3RydWUnLFxyXG4gICAgICAgICAgICAgICAgLy8ncGFnaW5hdGlvbicgOiAndHJ1ZScsXHJcbiAgICAgICAgICAgICAgICAvLydhdXRvcGxheScgOiAndHJ1ZScsXHJcbiAgICAgICAgICAgICAgICAnc2xpZGVEdXJhdGlvbicgOiAnNTAwMCcsXHJcbiAgICAgICAgICAgICAgICAnc3BlZWQnIDogJzUwMCcsXHJcbiAgICAgICAgICAgICAgICAnYXJyb3dSaWdodCcgOiAnLmFycm93LXJpZ2h0JyxcclxuICAgICAgICAgICAgICAgICdhcnJvd0xlZnQnIDogJy5hcnJvdy1sZWZ0J1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gJC5leHRlbmQoe30sdGhpcyx0aGlzLmRlZmF1bHRzLHNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbHMgPSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyU2xpZGUgOiAwLFxyXG4gICAgICAgICAgICAgICAgJGN1cnJTbGlkZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIHRvdGFsU2xpZGVzIDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBjc3N0cmFuc2l0aW9uczogZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICQuZXh0ZW5kKHRoaXMsdGhpcy5pbml0aWFscyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLiRlbCA9ICQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVNsaWRlID0gJC5wcm94eSh0aGlzLmNoYW5nZVNsaWRlLHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbml0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlVWlkID0gaW5zdGFuY2VVaWQrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBfY29vbENhcm91c2VsO1xyXG5cclxuICAgIH0pKCk7XHJcblxyXG4gICAgY29vbENhcm91c2VsLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICB0aGlzLmNzc3RyYW5zaXRpb25zVGVzdCgpO1xyXG4gICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCdjb29sLWNhcm91c2VsJyk7XHJcbiAgICAgICAgdGhpcy5idWlsZCgpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzKCk7XHJcbiAgICAgICAgdGhpcy5hY3RpdmF0ZSgpO1xyXG4gICAgICAgIHRoaXMuaW5pdFRpbWVyKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvb2xDYXJvdXNlbC5wcm90b3R5cGUuY3NzdHJhbnNpdGlvbnNUZXN0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21vZGVybml6cicpO1xyXG4gICAgICAgIC8vQSBsaXN0IG9mIHByb3BlcnRpZXMgdG8gdGVzdCBmb3JcclxuICAgICAgICB2YXIgcHJvcHMgPSBbXCJ0cmFuc2l0aW9uXCIsXCJXZWJraXRUcmFuc2l0aW9uXCIsXCJNb3pUcmFuc2l0aW9uXCIsXCJPVHJhbnNpdGlvblwiLFwibXNUcmFuc2l0aW9uXCJdO1xyXG4gICAgICAgIC8vSXRlcmF0ZSB0aHJvdWdoIG91ciBuZXcgZWxlbWVudCdzIFN0eWxlIHByb3BlcnR5IHRvIHNlZSBpZiB0aGVzZSBwcm9wZXJ0aWVzIGV4aXN0XHJcbiAgICAgICAgZm9yICggdmFyIGkgaW4gcHJvcHMgKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wID0gcHJvcHNbaV07XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBlbGVtLnN0eWxlW3Byb3BdICE9PSB1bmRlZmluZWQgPyBwcm9wIDogZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jc3N0cmFuc2l0aW9ucyA9IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb29sQ2Fyb3VzZWwucHJvdG90eXBlLmFkZENTU0R1cmF0aW9uID0gZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgXyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy4kZWwuZmluZCgnLnNsaWRlJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlW18uY3NzdHJhbnNpdGlvbnMrJ0R1cmF0aW9uJ10gPSBfLnNldHRpbmdzLnNwZWVkKydtcyc7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgICAgICBjb29sQ2Fyb3VzZWwucHJvdG90eXBlLnJlbW92ZUNTU0R1cmF0aW9uID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuc2xpZGUnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlW18uY3NzdHJhbnNpdGlvbnMrJ0R1cmF0aW9uJ10gPSAnJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY29vbENhcm91c2VsLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciAkaW5kaWNhdG9ycyA9IHRoaXMuJGVsLmFwcGVuZCgnPHVsIGNsYXNzPVwiaW5kaWNhdG9yc1wiID4nKS5maW5kKCcuaW5kaWNhdG9ycycpO1xyXG4gICAgICAgICAgICB0aGlzLnRvdGFsU2xpZGVzID0gdGhpcy4kZWwuZmluZCgnLnNsaWRlJykubGVuZ3RoO1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50b3RhbFNsaWRlczsgaSsrKSAkaW5kaWNhdG9ycy5hcHBlbmQoJzxsaSBkYXRhLWluZGV4PScraSsnPicpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgY29vbENhcm91c2VsLnByb3RvdHlwZS5hY3RpdmF0ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy4kY3VyclNsaWRlID0gdGhpcy4kZWwuZmluZCgnLnNsaWRlJykuZXEoMCk7XHJcbiAgICAgICAgdGhpcy4kZWwuZmluZCgnLmluZGljYXRvcnMgbGknKS5lcSgwKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvb2xDYXJvdXNlbC5wcm90b3R5cGUuZXZlbnRzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAkKCdib2R5JylcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsdGhpcy5zZXR0aW5ncy5hcnJvd1JpZ2h0LHtkaXJlY3Rpb246J3JpZ2h0J30sdGhpcy5jaGFuZ2VTbGlkZSlcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsdGhpcy5zZXR0aW5ncy5hcnJvd0xlZnQse2RpcmVjdGlvbjonbGVmdCd9LHRoaXMuY2hhbmdlU2xpZGUpXHJcbiAgICAgICAgICAgIC5vbignY2xpY2snLCcuaW5kaWNhdG9ycyBsaScsdGhpcy5jaGFuZ2VTbGlkZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvb2xDYXJvdXNlbC5wcm90b3R5cGUuY2xlYXJUaW1lciA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXIpIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvb2xDYXJvdXNlbC5wcm90b3R5cGUuaW5pdFRpbWVyID0gZnVuY3Rpb24oKXtcclxuICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwodGhpcy5jaGFuZ2VTbGlkZSwgdGhpcy5zZXR0aW5ncy5zbGlkZUR1cmF0aW9uKTtcclxuICAgIH07XHJcblxyXG4gICAgY29vbENhcm91c2VsLnByb3RvdHlwZS5zdGFydFRpbWVyID0gZnVuY3Rpb24oKXtcclxuICAgICAgICB0aGlzLmluaXRUaW1lcigpO1xyXG4gICAgICAgIHRoaXMudGhyb3R0bGUgPSBmYWxzZTtcclxuICAgIH07XHJcblxyXG4gICAgY29vbENhcm91c2VsLnByb3RvdHlwZS5jaGFuZ2VTbGlkZSA9IGZ1bmN0aW9uKGUpe1xyXG5cclxuICAgICAgICBpZiAodGhpcy50aHJvdHRsZSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMudGhyb3R0bGUgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLmNsZWFyVGltZXIoKTtcclxuXHJcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHRoaXMuX2RpcmVjdGlvbihlKTtcclxuXHJcbiAgICAgICAgdmFyIGFuaW1hdGUgPSB0aGlzLl9uZXh0KGUsZGlyZWN0aW9uKTtcclxuICAgICAgICBpZiAoIWFuaW1hdGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgdmFyICRuZXh0U2xpZGUgPSB0aGlzLiRlbC5maW5kKCcuc2xpZGUnKS5lcSh0aGlzLmN1cnJTbGlkZSkuYWRkQ2xhc3MoZGlyZWN0aW9uICsgJyBhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmNzc3RyYW5zaXRpb25zKXtcclxuICAgICAgICAgICAgdGhpcy5fanNBbmltYXRpb24oJG5leHRTbGlkZSxkaXJlY3Rpb24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Nzc0FuaW1hdGlvbigkbmV4dFNsaWRlLGRpcmVjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb29sQ2Fyb3VzZWwucHJvdG90eXBlLl9kaXJlY3Rpb24gPSBmdW5jdGlvbihlKXtcclxuICAgICAgICB2YXIgZGlyZWN0aW9uO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGUgIT09ICd1bmRlZmluZWQnKXtcclxuICAgICAgICAgICAgZGlyZWN0aW9uID0gKHR5cGVvZiBlLmRhdGEgPT09ICd1bmRlZmluZWQnID8gJ3JpZ2h0JyA6IGUuZGF0YS5kaXJlY3Rpb24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9ICdyaWdodCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaXJlY3Rpb247XHJcbiAgICB9O1xyXG5cclxuICAgIGNvb2xDYXJvdXNlbC5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbihlLGRpcmVjdGlvbil7XHJcblxyXG4gICAgICAgIHZhciBpbmRleCA9ICh0eXBlb2YgZSAhPT0gJ3VuZGVmaW5lZCcgPyAkKGUuY3VycmVudFRhcmdldCkuZGF0YSgnaW5kZXgnKSA6IHVuZGVmaW5lZCk7XHJcblxyXG4gICAgICAgIHN3aXRjaCh0cnVlKXtcclxuXHJcbiAgICAgICAgICAgIGNhc2UoIHR5cGVvZiBpbmRleCAhPT0gJ3VuZGVmaW5lZCcpOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VyclNsaWRlID09IGluZGV4KXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJTbGlkZSA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UoZGlyZWN0aW9uID09ICdyaWdodCcgJiYgdGhpcy5jdXJyU2xpZGUgPCAodGhpcy50b3RhbFNsaWRlcyAtIDEpKTpcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VyclNsaWRlKys7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZShkaXJlY3Rpb24gPT0gJ3JpZ2h0Jyk6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJTbGlkZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZShkaXJlY3Rpb24gPT0gJ2xlZnQnICYmIHRoaXMuY3VyclNsaWRlID09PSAwKTpcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VyclNsaWRlID0gKHRoaXMudG90YWxTbGlkZXMgLSAxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlKGRpcmVjdGlvbiA9PSAnbGVmdCcpOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyU2xpZGUtLTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgY29vbENhcm91c2VsLnByb3RvdHlwZS5fY3NzQW5pbWF0aW9uID0gZnVuY3Rpb24oJG5leHRTbGlkZSxkaXJlY3Rpb24pe1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCd0cmFuc2l0aW9uJyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ1NTRHVyYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy4kY3VyclNsaWRlLmFkZENsYXNzKCdzaGlmdC0nK2RpcmVjdGlvbik7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpLDEwMCk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2xhc3MoJ3RyYW5zaXRpb24nKTtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVDU1NEdXJhdGlvbigpO1xyXG4gICAgICAgICAgICB0aGlzLiRjdXJyU2xpZGUucmVtb3ZlQ2xhc3MoJ2FjdGl2ZSBzaGlmdC1sZWZ0IHNoaWZ0LXJpZ2h0Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuJGN1cnJTbGlkZSA9ICRuZXh0U2xpZGUucmVtb3ZlQ2xhc3MoZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlSW5kaWNhdG9ycygpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZXIoKTtcclxuICAgICAgICB9LmJpbmQodGhpcyksMTAwICsgdGhpcy5zZXR0aW5ncy5zcGVlZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvb2xDYXJvdXNlbC5wcm90b3R5cGUuX2pzQW5pbWF0aW9uID0gZnVuY3Rpb24oJG5leHRTbGlkZSxkaXJlY3Rpb24pe1xyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuXHJcbiAgICAgICAgaWYoZGlyZWN0aW9uID09ICdyaWdodCcpIF8uJGN1cnJTbGlkZS5hZGRDbGFzcygnanMtcmVzZXQtbGVmdCcpO1xyXG5cclxuICAgICAgICB2YXIgYW5pbWF0aW9uID0ge307XHJcbiAgICAgICAgYW5pbWF0aW9uW2RpcmVjdGlvbl0gPSAnMCUnO1xyXG5cclxuICAgICAgICB2YXIgYW5pbWF0aW9uUHJldiA9IHt9O1xyXG4gICAgICAgIGFuaW1hdGlvblByZXZbZGlyZWN0aW9uXSA9ICcxMDAlJztcclxuXHJcbiAgICAgICAgdGhpcy4kY3VyclNsaWRlLmFuaW1hdGUoYW5pbWF0aW9uUHJldix0aGlzLnNldHRpbmdzLnNwZWVkKTtcclxuXHJcbiAgICAgICAgJG5leHRTbGlkZS5hbmltYXRlKGFuaW1hdGlvbix0aGlzLnNldHRpbmdzLnNwZWVkLCdzd2luZycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgLy9HZXQgcmlkIG9mIGFueSBKUyBhbmltYXRpb24gcmVzaWR1ZVxyXG4gICAgICAgICAgICBfLiRjdXJyU2xpZGUucmVtb3ZlQ2xhc3MoJ2FjdGl2ZSBqcy1yZXNldC1sZWZ0JykuYXR0cignc3R5bGUnLCcnKTtcclxuICAgICAgICAgICAgLy9DYWNoZSB0aGUgbmV4dCBzbGlkZSBhZnRlciBjbGFzc2VzIGFuZCBpbmxpbmUgc3R5bGVzIGhhdmUgYmVlbiByZW1vdmVkXHJcbiAgICAgICAgICAgIF8uJGN1cnJTbGlkZSA9ICRuZXh0U2xpZGUucmVtb3ZlQ2xhc3MoZGlyZWN0aW9uKS5hdHRyKCdzdHlsZScsJycpO1xyXG4gICAgICAgICAgICBfLl91cGRhdGVJbmRpY2F0b3JzKCk7XHJcbiAgICAgICAgICAgIF8uc3RhcnRUaW1lcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb29sQ2Fyb3VzZWwucHJvdG90eXBlLl91cGRhdGVJbmRpY2F0b3JzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICB0aGlzLiRlbC5maW5kKCcuaW5kaWNhdG9ycyBsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5lcSh0aGlzLmN1cnJTbGlkZSkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLmZuLmNvb2xDYXJvdXNlbCA9IGZ1bmN0aW9uKG9wdGlvbnMpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaW5kZXgsZWwpe1xyXG4gICAgICAgICAgICBlbC5jb29sQ2Fyb3VzZWwgPSBuZXcgY29vbENhcm91c2VsKGVsLG9wdGlvbnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufSk7XHJcblxyXG4vLyBDdXN0b20gb3B0aW9ucyBmb3IgdGhlIGNhcm91c2VsXHJcbiQoJy5jYXJvdXNlbCcpLmNvb2xDYXJvdXNlbCh7XHJcbiAgICBhcnJvd1JpZ2h0IDogJy5hcnJvdy1yaWdodCcsXHJcbiAgICBhcnJvd0xlZnQgOiAnLmFycm93LWxlZnQnLFxyXG4gICAgc3BlZWQgOiAxMDAwLFxyXG4gICAgc2xpZGVEdXJhdGlvbiA6IDUwMDBcclxufSk7XHJcblxyXG4kKCcjbGlzdGluZ3MtY2Fyb3VzZWwxJykuY29vbENhcm91c2VsKHtcclxuICAgIGFycm93UmlnaHQgOiAnLmFycm93LXJpZ2h0JyxcclxuICAgIGFycm93TGVmdCA6ICcuYXJyb3ctbGVmdCcsXHJcbiAgICBzcGVlZCA6IDEwMDAsXHJcbiAgICBzbGlkZUR1cmF0aW9uIDogNTAwMFxyXG59KTtcclxuXHJcbiQoJyNsaXN0aW5ncy1jYXJvdXNlbDInKS5jb29sQ2Fyb3VzZWwoe1xyXG4gICAgYXJyb3dSaWdodCA6ICcuYXJyb3ctcmlnaHQnLFxyXG4gICAgYXJyb3dMZWZ0IDogJy5hcnJvdy1sZWZ0JyxcclxuICAgIHNwZWVkIDogMTAwMCxcclxuICAgIHNsaWRlRHVyYXRpb24gOiA1MDAwXHJcbn0pO1xyXG5cclxuJCgnI2xpc3RpbmdzLWNhcm91c2VsMycpLmNvb2xDYXJvdXNlbCh7XHJcbiAgICBhcnJvd1JpZ2h0IDogJy5hcnJvdy1yaWdodCcsXHJcbiAgICBhcnJvd0xlZnQgOiAnLmFycm93LWxlZnQnLFxyXG4gICAgc3BlZWQgOiAxMDAwLFxyXG4gICAgc2xpZGVEdXJhdGlvbiA6IDUwMDBcclxufSk7Il19
